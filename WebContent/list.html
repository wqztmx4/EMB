<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>潍坊市危化品信息公示系统</title>
<link rel="stylesheet" type="text/css"
	href="easyui/1.3.4/themes/default/easyui.css" />
<link rel="stylesheet" type="text/css"
	href="easyui/1.3.4/themes/icon.css" />
<!-- <link rel="stylesheet" type="text/css" href="css/tabs.css" /> -->
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="easyui/1.3.4/jquery.easyui.min.js"></script>
<script type="text/javascript" src="http://www.w3cschool.cc/try/jeasyui/datagrid-detailview.js"></script>
<style>
.head{
	height: 190px; 
	width:100%;
	background:url(images/header_wenzi_2.jpg) center no-repeat;   
	margin-bottom: 10px;
	background-size:cover;
}
.head h1{
	text-shadow:1px 1px 1px #333;
	color:#000;
	font-size:30px;
}
</style>	
</head>
<body>
	<div class="head">
	<!-- <h1>潍坊市危险化学品安全风险研判与承诺公告</h1> -->
	</div>

	<div class="easyui-panel" title="今日未公示企业数量"
		style="padding: 10px; height: 75px; margin-bottom: 20px;">
		<a style="margin-right: 10px;" href="list.html?c=2" target="_blank"
			class="easyui-linkbutton" data-options="toggle:true,group:'g2',plain:true">青州市<span id="2" style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=3" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">诸城市<span id="3"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=4"  target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">寿光市<span id="4"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=5" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">安丘市<span id="5"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=6"  target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">高密市<span id="6"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=7" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">昌邑市<span id="7"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=8" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">临朐县<span id="8"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=9" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">昌乐县<span id="9"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=10" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">奎文区<span id="10"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=11" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">潍城区<span id="11"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=12" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">寒亭区<span id="12"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=13" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">坊子区<span id="13"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=14" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">高新区<span id="14"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=15" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">滨海区<span id="15"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=16" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">峡山区<span id="16"
			style="margin-left: 3px"></span></a> 
			<a style="margin-right: 10px;"
			href="list.html?c=17" target="_blank" class="easyui-linkbutton"
			data-options="toggle:true,group:'g2',plain:true">经济区<span id="17"
			style="margin-left: 3px"></span></a>
	</div>

	<div style="height: 500px;">
		<table id="show-datagrid1" ></table>
	</div>

	<script type="text/javascript">
	
		$('#show-datagrid1').datagrid({
			url:'data/a.json',
			loadFilter:pagerFilter,
			rownumbers : true,
			singleSelect : false,
			pageSize : 20,
			pagination : true,
			multiSort : true,
			fitColumns : true,
			fit : true,
			columns : [ [ {
				field : 'id',
				title : '信息ID',
				width : 30,
				sortable : true,
				hidden:true
			}, {
				field : 'enterpriseName',
				title : '未公示企业名称',
				width : 100,
				sortable : true,
				formatter: function(value,row,index){
					return '<span style="font-size:16px">'+row.enterpriseName+'</span>';
				}
			}, {
				field : 'enterpriseId',
				title : '企业ID',
				width : 30,
				hidden:true,
				formatter:function(value,row,index){
					return row.id;
				}
			}]]
		});
	
		function filterByCountries(data){
			var datas = new Array(0);	
			var q = window.location.search.split("=")[1];
			for(var i = 0 ; i < data.total; i++){
				if(data.rows[i].countries==q){
					datas.push(data.rows[i]);
				}
			}
			return datas;
			}
		
	var isFirst=true;
	/**
	 * Name 分页过滤器
	 */
	function pagerFilter(data) {
		if(isFirst){
			data = filterByCountries(data);
			isFirst=false;
		}
		if (typeof data.length == 'number' && typeof data.splice == 'function') {// is array                
			data = {
				total : data.length,
				rows : data
			}
		}
		var dg = $(this);
		var opts = dg.datagrid('options');
		var pager = dg.datagrid('getPager');
		pager.pagination({
			onSelectPage : function(pageNum, pageSize) {
				opts.pageNumber = pageNum;
				opts.pageSize = pageSize;
				pager.pagination('refresh', {
					pageNumber : pageNum,
					pageSize : pageSize
				});
				dg.datagrid('loadData', data);
			}
		});
		if (!data.originalRows) {
			data.originalRows = (data.rows);
		}
		var start = (opts.pageNumber - 1) * parseInt(opts.pageSize);
		var end = start + parseInt(opts.pageSize);
		data.rows = (data.originalRows.slice(start, end));
		return data;
	}
	
	
	
	function JSONLength(obj,key,value) {		 
		var size = 0;
		$.each(obj.rows,function(i, item) {
			if (item[key]==value) size++;
		});	 
		return size;		 
		};

	
	
 	$(document).ready(function (){
		$.ajax({
			url:"data/a.json",
			type:"GET",
			dataType:"json",
			success:function(data){
				$('#2').text(JSONLength(data,"countries","2"));
				$('#3').text(JSONLength(data,"countries","3"));
				$('#4').text(JSONLength(data,"countries","4"));
				$('#5').text(JSONLength(data,"countries","5"));
				$('#6').text(JSONLength(data,"countries","6"));
				$('#7').text(JSONLength(data,"countries","7"));
				$('#8').text(JSONLength(data,"countries","8"));
				$('#9').text(JSONLength(data,"countries","9"));
				$('#10').text(JSONLength(data,"countries","10"));
				$('#11').text(JSONLength(data,"countries","11"));
				$('#12').text(JSONLength(data,"countries","12"));
				$('#13').text(JSONLength(data,"countries","13"));
				$('#14').text(JSONLength(data,"countries","14"));
				$('#15').text(JSONLength(data,"countries","15"));
				$('#16').text(JSONLength(data,"countries","16"));
				$('#17').text(JSONLength(data,"countries","17"));
			}
		});	
	}); 
 	$('.datagrid-header .datagrid-cell span ').css('font-size','16px');
 	
 	function writeObj(obj){ 
 		 var description = ""; 
 		 for(var i in obj){ 
 		 var property=obj[i]; 
 		 description+=i+" = "+property+"\n"; 
 		 } 
 		 alert(description); 
 		}
	

	</script>
</body>
</html>